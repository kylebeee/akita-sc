/**
 * Network-specific app ID configuration
 * 
 * This file contains the baked-in app IDs for each network.
 * These are used when the SDK auto-detects the network from the AlgorandClient.
 * 
 * To update after a deployment:
 * 1. Run deploy-universe.ts for the target network
 * 2. Copy the app IDs from the generated .env file to this file
 */

import { AkitaNetwork } from './config';

/**
 * App IDs for a specific network
 */
export interface NetworkAppIds {
  // Core Contracts
  dao: bigint;
  wallet: bigint;
  escrowFactory: bigint;
  walletFactory: bigint;
  subscriptions: bigint;
  stakingPoolFactory: bigint;
  staking: bigint;
  
  // Social System
  social: bigint;
  socialGraph: bigint;
  socialImpact: bigint;
  socialModeration: bigint;
  
  // Factories
  auctionFactory: bigint;
  marketplace: bigint;
  raffleFactory: bigint;
  pollFactory: bigint;
  prizeBoxFactory: bigint;
  
  // Plugins
  revenueManagerPlugin: bigint;
  updatePlugin: bigint;
  optinPlugin: bigint;
  asaMintPlugin: bigint;
  payPlugin: bigint;
  hyperSwapPlugin: bigint;
  subscriptionsPlugin: bigint;
  auctionPlugin: bigint;
  daoPlugin: bigint;
  dualStakePlugin: bigint;
  gatePlugin: bigint;
  marketplacePlugin: bigint;
  nfdPlugin: bigint;
  paySiloPlugin: bigint;
  paySiloFactoryPlugin: bigint;
  pollPlugin: bigint;
  rafflePlugin: bigint;
  rewardsPlugin: bigint;
  socialPlugin: bigint;
  stakingPlugin: bigint;
  stakingPoolPlugin: bigint;
  
  // Gate & Other
  gate: bigint;
  hyperSwap: bigint;
  metaMerkles: bigint;
  
  // Subgates
  akitaReferrerGate: bigint;
  assetGate: bigint;
  merkleAddressGate: bigint;
  merkleAssetGate: bigint;
  nfdGate: bigint;
  nfdRootGate: bigint;
  pollGate: bigint;
  socialActivityGate: bigint;
  socialFollowerCountGate: bigint;
  socialFollowerIndexGate: bigint;
  socialImpactGate: bigint;
  socialModeratorGate: bigint;
  stakingAmountGate: bigint;
  stakingPowerGate: bigint;
  subscriptionGate: bigint;
  subscriptionStreakGate: bigint;
  
  // Assets
  akta: bigint;
  bones: bigint;
  
  // External Apps (for reference)
  vrfBeacon: bigint;
  nfdRegistry: bigint;
  assetInbox: bigint;
  akitaNfd: bigint;
}

/**
 * Localnet app IDs
 * 
 * These are auto-generated by deploy-universe.ts when deploying to localnet.
 * They will be overwritten each time you run a localnet deployment.
 * 
 * Last updated: 2025-12-15T08:17:47.292Z
 */
export const LOCALNET_APP_IDS: NetworkAppIds = {
  // Core Contracts
  dao: 1004n,
  wallet: 1088n,
  escrowFactory: 1002n,
  walletFactory: 1010n,
  subscriptions: 1017n,
  stakingPoolFactory: 1018n,
  staking: 1025n,
  
  // Social System
  social: 1030n,
  socialGraph: 1029n,
  socialImpact: 1028n,
  socialModeration: 1031n,
  
  // Factories
  auctionFactory: 1035n,
  marketplace: 1042n,
  raffleFactory: 1043n,
  pollFactory: 1044n,
  prizeBoxFactory: 1045n,
  
  // Plugins
  revenueManagerPlugin: 1095n,
  updatePlugin: 1111n,
  optinPlugin: 1160n,
  asaMintPlugin: 1167n,
  payPlugin: 1168n,
  hyperSwapPlugin: 1169n,
  subscriptionsPlugin: 1170n,
  auctionPlugin: 1171n,
  daoPlugin: 1172n,
  dualStakePlugin: 1173n,
  gatePlugin: 1174n,
  marketplacePlugin: 1175n,
  nfdPlugin: 1176n,
  paySiloPlugin: 1177n,
  paySiloFactoryPlugin: 1178n,
  pollPlugin: 1179n,
  rafflePlugin: 1180n,
  rewardsPlugin: 1181n,
  socialPlugin: 1182n,
  stakingPlugin: 1183n,
  stakingPoolPlugin: 1184n,
  
  // Gate & Other
  gate: 1047n,
  hyperSwap: 1048n,
  metaMerkles: 1046n,
  
  // Subgates
  akitaReferrerGate: 1053n,
  assetGate: 1049n,
  merkleAddressGate: 1052n,
  merkleAssetGate: 1051n,
  nfdGate: 1050n,
  nfdRootGate: 1057n,
  pollGate: 1058n,
  socialActivityGate: 1055n,
  socialFollowerCountGate: 1056n,
  socialFollowerIndexGate: 1054n,
  socialImpactGate: 1060n,
  socialModeratorGate: 1061n,
  stakingAmountGate: 1059n,
  stakingPowerGate: 1063n,
  subscriptionGate: 1064n,
  subscriptionStreakGate: 1062n,
  
  // Assets
  akta: 0n,
  bones: 1629n,
  
  // External Apps
  vrfBeacon: 0n,
  nfdRegistry: 0n,
  assetInbox: 0n,
  akitaNfd: 0n,
};

/**
 * Testnet app IDs
 * 
 * Last updated: 2025-12-15T09:23:03.089Z
 */
export const TESTNET_APP_IDS: NetworkAppIds = {
  // Core Contracts
  dao: 751971739n,
  wallet: 751972058n,
  escrowFactory: 751967076n,
  walletFactory: 751971757n,
  subscriptions: 751971779n,
  stakingPoolFactory: 751971794n,
  staking: 751971819n,
  
  // Social System
  social: 751971872n,
  socialGraph: 751971844n,
  socialImpact: 751971843n,
  socialModeration: 751971873n,
  
  // Factories
  auctionFactory: 751971901n,
  marketplace: 751971922n,
  raffleFactory: 751971928n,
  pollFactory: 751971931n,
  prizeBoxFactory: 751971937n,
  
  // Plugins
  revenueManagerPlugin: 751972084n,
  updatePlugin: 751972139n,
  optinPlugin: 751968346n,
  asaMintPlugin: 751968373n,
  payPlugin: 751968379n,
  hyperSwapPlugin: 751972295n,
  subscriptionsPlugin: 751968395n,
  auctionPlugin: 751972301n,
  daoPlugin: 751972311n,
  dualStakePlugin: 751972317n,
  gatePlugin: 751972318n,
  marketplacePlugin: 751968424n,
  nfdPlugin: 751972324n,
  paySiloPlugin: 751972334n,
  paySiloFactoryPlugin: 751968441n,
  pollPlugin: 751972340n,
  rafflePlugin: 751972341n,
  rewardsPlugin: 751972347n,
  socialPlugin: 751972357n,
  stakingPlugin: 751972363n,
  stakingPoolPlugin: 751972365n,
  
  // Gate & Other
  gate: 751971953n,
  hyperSwap: 751971956n,
  metaMerkles: 751971947n,
  
  // Subgates
  akitaReferrerGate: 751971962n,
  assetGate: 751971964n,
  merkleAddressGate: 751971975n,
  merkleAssetGate: 751971967n,
  nfdGate: 751971977n,
  nfdRootGate: 751971966n,
  pollGate: 751971963n,
  socialActivityGate: 751971965n,
  socialFollowerCountGate: 751971970n,
  socialFollowerIndexGate: 751971969n,
  socialImpactGate: 751971971n,
  socialModeratorGate: 751971972n,
  stakingAmountGate: 751971968n,
  stakingPowerGate: 751971973n,
  subscriptionGate: 751971974n,
  subscriptionStreakGate: 751971976n,
  
  // Assets
  akta: 0n,
  bones: 751973254n,
  
  // External Apps
  vrfBeacon: 600011887n,
  nfdRegistry: 84366825n,
  assetInbox: 643020148n,
  akitaNfd: 0n,
};

/**
 * Mainnet app IDs
 * 
 * Last updated: 2025-12-15T10:26:30.297Z
 */
export const MAINNET_APP_IDS: NetworkAppIds = {
  // Core Contracts
  dao: 3368388956n,
  wallet: 3368395481n,
  escrowFactory: 3368388829n,
  walletFactory: 3368389117n,
  subscriptions: 3368389628n,
  stakingPoolFactory: 3368391029n,
  staking: 3368393172n,
  
  // Social System
  social: 3368393551n,
  socialGraph: 3368393480n,
  socialImpact: 3368393419n,
  socialModeration: 3368393629n,
  
  // Factories
  auctionFactory: 3368393933n,
  marketplace: 3368394180n,
  raffleFactory: 3368394210n,
  pollFactory: 3368394268n,
  prizeBoxFactory: 3368394289n,
  
  // Plugins
  revenueManagerPlugin: 3368395771n,
  updatePlugin: 3368396455n,
  optinPlugin: 3368398585n,
  asaMintPlugin: 3368398964n,
  payPlugin: 3368399056n,
  hyperSwapPlugin: 3368399121n,
  subscriptionsPlugin: 3368399152n,
  auctionPlugin: 3368399217n,
  daoPlugin: 3368399317n,
  dualStakePlugin: 3368399386n,
  gatePlugin: 3368399411n,
  marketplacePlugin: 3368399474n,
  nfdPlugin: 3368399559n,
  paySiloPlugin: 3368399670n,
  paySiloFactoryPlugin: 3368399704n,
  pollPlugin: 3368399770n,
  rafflePlugin: 3368399868n,
  rewardsPlugin: 3368399956n,
  socialPlugin: 3368400007n,
  stakingPlugin: 3368400044n,
  stakingPoolPlugin: 3368400148n,
  
  // Gate & Other
  gate: 3368394436n,
  hyperSwap: 3368394471n,
  metaMerkles: 3368394372n,
  
  // Subgates
  akitaReferrerGate: 3368394596n,
  assetGate: 3368394608n,
  merkleAddressGate: 3368394591n,
  merkleAssetGate: 3368394598n,
  nfdGate: 3368394599n,
  nfdRootGate: 3368394594n,
  pollGate: 3368394595n,
  socialActivityGate: 3368394606n,
  socialFollowerCountGate: 3368394601n,
  socialFollowerIndexGate: 3368394597n,
  socialImpactGate: 3368394605n,
  socialModeratorGate: 3368394602n,
  stakingAmountGate: 3368394603n,
  stakingPowerGate: 3368394600n,
  subscriptionGate: 3368394593n,
  subscriptionStreakGate: 3368394607n,
  
  // Assets
  akta: 0n,
  bones: 3368406527n,
  
  // External Apps
  vrfBeacon: 1615566206n,
  nfdRegistry: 760937186n,
  assetInbox: 2449590623n,
  akitaNfd: 765902356n,
};

/**
 * Map of network to app IDs
 */
export const NETWORK_APP_IDS: Record<AkitaNetwork, NetworkAppIds> = {
  localnet: LOCALNET_APP_IDS,
  testnet: TESTNET_APP_IDS,
  mainnet: MAINNET_APP_IDS,
};

/**
 * Get app IDs for a specific network
 * @param network - The network to get app IDs for
 * @returns The app IDs for the network
 */
export function getNetworkAppIds(network: AkitaNetwork): NetworkAppIds {
  return NETWORK_APP_IDS[network];
}

/**
 * Mapping from SDK/env var names to NetworkAppIds keys
 */
export const ENV_TO_NETWORK_KEY: Record<string, keyof NetworkAppIds> = {
  DAO_APP_ID: 'dao',
  WALLET_APP_ID: 'wallet',
  ESCROW_FACTORY_APP_ID: 'escrowFactory',
  WALLET_FACTORY_APP_ID: 'walletFactory',
  SUBSCRIPTIONS_APP_ID: 'subscriptions',
  STAKING_POOL_FACTORY_APP_ID: 'stakingPoolFactory',
  STAKING_APP_ID: 'staking',
  REWARDS_APP_ID: 'staking', // Note: rewards uses the rewardsPlugin key
  
  // Social System
  SOCIAL_APP_ID: 'social',
  SOCIAL_GRAPH_APP_ID: 'socialGraph',
  SOCIAL_IMPACT_APP_ID: 'socialImpact',
  SOCIAL_MODERATION_APP_ID: 'socialModeration',
  
  // Factories
  AUCTION_FACTORY_APP_ID: 'auctionFactory',
  MARKETPLACE_APP_ID: 'marketplace',
  RAFFLE_FACTORY_APP_ID: 'raffleFactory',
  POLL_FACTORY_APP_ID: 'pollFactory',
  PRIZE_BOX_FACTORY_APP_ID: 'prizeBoxFactory',
  
  // Plugins
  REVENUE_MANAGER_PLUGIN_APP_ID: 'revenueManagerPlugin',
  UPDATE_PLUGIN_APP_ID: 'updatePlugin',
  OPTIN_PLUGIN_APP_ID: 'optinPlugin',
  ASA_MINT_PLUGIN_APP_ID: 'asaMintPlugin',
  PAY_PLUGIN_APP_ID: 'payPlugin',
  HYPER_SWAP_PLUGIN_APP_ID: 'hyperSwapPlugin',
  SUBSCRIPTIONS_PLUGIN_APP_ID: 'subscriptionsPlugin',
  AUCTION_PLUGIN_APP_ID: 'auctionPlugin',
  DAO_PLUGIN_APP_ID: 'daoPlugin',
  DUAL_STAKE_PLUGIN_APP_ID: 'dualStakePlugin',
  GATE_PLUGIN_APP_ID: 'gatePlugin',
  MARKETPLACE_PLUGIN_APP_ID: 'marketplacePlugin',
  NFD_PLUGIN_APP_ID: 'nfdPlugin',
  PAY_SILO_PLUGIN_APP_ID: 'paySiloPlugin',
  PAY_SILO_FACTORY_PLUGIN_APP_ID: 'paySiloFactoryPlugin',
  POLL_PLUGIN_APP_ID: 'pollPlugin',
  RAFFLE_PLUGIN_APP_ID: 'rafflePlugin',
  REWARDS_PLUGIN_APP_ID: 'rewardsPlugin',
  SOCIAL_PLUGIN_APP_ID: 'socialPlugin',
  STAKING_PLUGIN_APP_ID: 'stakingPlugin',
  STAKING_POOL_PLUGIN_APP_ID: 'stakingPoolPlugin',
  
  // Gate & Other
  GATE_APP_ID: 'gate',
  HYPER_SWAP_APP_ID: 'hyperSwap',
  META_MERKLES_APP_ID: 'metaMerkles',
  
  // Subgates
  AKITA_REFERRER_GATE_APP_ID: 'akitaReferrerGate',
  ASSET_GATE_APP_ID: 'assetGate',
  MERKLE_ADDRESS_GATE_APP_ID: 'merkleAddressGate',
  MERKLE_ASSET_GATE_APP_ID: 'merkleAssetGate',
  NFD_GATE_APP_ID: 'nfdGate',
  NFD_ROOT_GATE_APP_ID: 'nfdRootGate',
  POLL_GATE_APP_ID: 'pollGate',
  SOCIAL_ACTIVITY_GATE_APP_ID: 'socialActivityGate',
  SOCIAL_FOLLOWER_COUNT_GATE_APP_ID: 'socialFollowerCountGate',
  SOCIAL_FOLLOWER_INDEX_GATE_APP_ID: 'socialFollowerIndexGate',
  SOCIAL_IMPACT_GATE_APP_ID: 'socialImpactGate',
  SOCIAL_MODERATOR_GATE_APP_ID: 'socialModeratorGate',
  STAKING_AMOUNT_GATE_APP_ID: 'stakingAmountGate',
  STAKING_POWER_GATE_APP_ID: 'stakingPowerGate',
  SUBSCRIPTION_GATE_APP_ID: 'subscriptionGate',
  SUBSCRIPTION_STREAK_GATE_APP_ID: 'subscriptionStreakGate',
  
  // Assets
  AKTA_ASSET_ID: 'akta',
  BONES_ASSET_ID: 'bones',
};

/**
 * Get a specific app ID from the network config
 * @param network - The network
 * @param envVarName - The environment variable name (e.g., 'DAO_APP_ID')
 * @returns The app ID, or undefined if not found or is 0
 */
export function getAppIdFromNetwork(network: AkitaNetwork, envVarName: string): bigint | undefined {
  const networkAppIds = getNetworkAppIds(network);
  
  const key = ENV_TO_NETWORK_KEY[envVarName];
  if (!key) return undefined;
  
  const appId = networkAppIds[key];
  return appId > 0n ? appId : undefined;
}

