/**
 * Network-specific app ID configuration
 * 
 * This file contains the baked-in app IDs for each network.
 * These are used when the SDK auto-detects the network from the AlgorandClient.
 * 
 * To update after a deployment:
 * 1. Run deploy-universe.ts for the target network
 * 2. Copy the app IDs from the generated .env file to this file
 */

import { AkitaNetwork } from './config';

/**
 * App IDs for a specific network
 */
export interface NetworkAppIds {
  // Core Contracts
  dao: bigint;
  wallet: bigint;
  escrowFactory: bigint;
  walletFactory: bigint;
  subscriptions: bigint;
  stakingPoolFactory: bigint;
  staking: bigint;
  
  // Social System
  social: bigint;
  socialGraph: bigint;
  socialImpact: bigint;
  socialModeration: bigint;
  
  // Factories
  auctionFactory: bigint;
  marketplace: bigint;
  raffleFactory: bigint;
  pollFactory: bigint;
  prizeBoxFactory: bigint;
  
  // Plugins
  revenueManagerPlugin: bigint;
  updatePlugin: bigint;
  optinPlugin: bigint;
  asaMintPlugin: bigint;
  payPlugin: bigint;
  hyperSwapPlugin: bigint;
  subscriptionsPlugin: bigint;
  auctionPlugin: bigint;
  daoPlugin: bigint;
  dualStakePlugin: bigint;
  gatePlugin: bigint;
  marketplacePlugin: bigint;
  nfdPlugin: bigint;
  paySiloPlugin: bigint;
  paySiloFactoryPlugin: bigint;
  pollPlugin: bigint;
  rafflePlugin: bigint;
  rewardsPlugin: bigint;
  socialPlugin: bigint;
  stakingPlugin: bigint;
  stakingPoolPlugin: bigint;
  
  // Gate & Other
  gate: bigint;
  hyperSwap: bigint;
  metaMerkles: bigint;
  
  // Subgates
  akitaReferrerGate: bigint;
  assetGate: bigint;
  merkleAddressGate: bigint;
  merkleAssetGate: bigint;
  nfdGate: bigint;
  nfdRootGate: bigint;
  pollGate: bigint;
  socialActivityGate: bigint;
  socialFollowerCountGate: bigint;
  socialFollowerIndexGate: bigint;
  socialImpactGate: bigint;
  socialModeratorGate: bigint;
  stakingAmountGate: bigint;
  stakingPowerGate: bigint;
  subscriptionGate: bigint;
  subscriptionStreakGate: bigint;
  
  // Assets
  akta: bigint;
  bones: bigint;
  
  // External Apps (for reference)
  vrfBeacon: bigint;
  nfdRegistry: bigint;
  assetInbox: bigint;
  akitaNfd: bigint;
}

/**
 * Localnet app IDs
 * 
 * These are auto-generated by deploy-universe.ts when deploying to localnet.
 * They will be overwritten each time you run a localnet deployment.
 * 
 * Last updated: 2025-12-15T04:52:30.522Z
 */
export const LOCALNET_APP_IDS: NetworkAppIds = {
  // Core Contracts
  dao: 1004n,
  wallet: 1088n,
  escrowFactory: 1002n,
  walletFactory: 1010n,
  subscriptions: 1017n,
  stakingPoolFactory: 1018n,
  staking: 1025n,
  
  // Social System
  social: 1030n,
  socialGraph: 1029n,
  socialImpact: 1028n,
  socialModeration: 1031n,
  
  // Factories
  auctionFactory: 1035n,
  marketplace: 1042n,
  raffleFactory: 1043n,
  pollFactory: 1044n,
  prizeBoxFactory: 1045n,
  
  // Plugins
  revenueManagerPlugin: 1095n,
  updatePlugin: 1111n,
  optinPlugin: 1160n,
  asaMintPlugin: 1167n,
  payPlugin: 1168n,
  hyperSwapPlugin: 1169n,
  subscriptionsPlugin: 1170n,
  auctionPlugin: 1171n,
  daoPlugin: 1172n,
  dualStakePlugin: 1173n,
  gatePlugin: 1174n,
  marketplacePlugin: 1175n,
  nfdPlugin: 1176n,
  paySiloPlugin: 1177n,
  paySiloFactoryPlugin: 1178n,
  pollPlugin: 1179n,
  rafflePlugin: 1180n,
  rewardsPlugin: 1181n,
  socialPlugin: 1182n,
  stakingPlugin: 1183n,
  stakingPoolPlugin: 1184n,
  
  // Gate & Other
  gate: 1047n,
  hyperSwap: 1048n,
  metaMerkles: 1046n,
  
  // Subgates
  akitaReferrerGate: 1049n,
  assetGate: 1051n,
  merkleAddressGate: 1054n,
  merkleAssetGate: 1052n,
  nfdGate: 1050n,
  nfdRootGate: 1056n,
  pollGate: 1055n,
  socialActivityGate: 1053n,
  socialFollowerCountGate: 1057n,
  socialFollowerIndexGate: 1059n,
  socialImpactGate: 1063n,
  socialModeratorGate: 1058n,
  stakingAmountGate: 1062n,
  stakingPowerGate: 1061n,
  subscriptionGate: 1060n,
  subscriptionStreakGate: 1064n,
  
  // Assets
  akta: 0n,
  bones: 1629n,
  
  // External Apps
  vrfBeacon: 0n,
  nfdRegistry: 0n,
  assetInbox: 0n,
  akitaNfd: 0n,
};

/**
 * Testnet app IDs
 * 
 * Last updated: Not yet deployed
 * TODO: Update these values after testnet deployment
 */
export const TESTNET_APP_IDS: NetworkAppIds = {
  // Core Contracts
  dao: 0n,
  wallet: 0n,
  escrowFactory: 0n,
  walletFactory: 0n,
  subscriptions: 0n,
  stakingPoolFactory: 0n,
  staking: 0n,
  
  // Social System
  social: 0n,
  socialGraph: 0n,
  socialImpact: 0n,
  socialModeration: 0n,
  
  // Factories
  auctionFactory: 0n,
  marketplace: 0n,
  raffleFactory: 0n,
  pollFactory: 0n,
  prizeBoxFactory: 0n,
  
  // Plugins
  revenueManagerPlugin: 0n,
  updatePlugin: 0n,
  optinPlugin: 0n,
  asaMintPlugin: 0n,
  payPlugin: 0n,
  hyperSwapPlugin: 0n,
  subscriptionsPlugin: 0n,
  auctionPlugin: 0n,
  daoPlugin: 0n,
  dualStakePlugin: 0n,
  gatePlugin: 0n,
  marketplacePlugin: 0n,
  nfdPlugin: 0n,
  paySiloPlugin: 0n,
  paySiloFactoryPlugin: 0n,
  pollPlugin: 0n,
  rafflePlugin: 0n,
  rewardsPlugin: 0n,
  socialPlugin: 0n,
  stakingPlugin: 0n,
  stakingPoolPlugin: 0n,
  
  // Gate & Other
  gate: 0n,
  hyperSwap: 0n,
  metaMerkles: 0n,
  
  // Subgates
  akitaReferrerGate: 0n,
  assetGate: 0n,
  merkleAddressGate: 0n,
  merkleAssetGate: 0n,
  nfdGate: 0n,
  nfdRootGate: 0n,
  pollGate: 0n,
  socialActivityGate: 0n,
  socialFollowerCountGate: 0n,
  socialFollowerIndexGate: 0n,
  socialImpactGate: 0n,
  socialModeratorGate: 0n,
  stakingAmountGate: 0n,
  stakingPowerGate: 0n,
  subscriptionGate: 0n,
  subscriptionStreakGate: 0n,
  
  // Assets
  akta: 0n,
  bones: 0n,
  
  // External Apps
  vrfBeacon: 600011887n,
  nfdRegistry: 84366825n,
  assetInbox: 643020148n,
  akitaNfd: 0n,
};

/**
 * Mainnet app IDs
 * 
 * Last updated: Not yet deployed
 * TODO: Update these values after mainnet deployment
 */
export const MAINNET_APP_IDS: NetworkAppIds = {
  // Core Contracts
  dao: 0n,
  wallet: 0n,
  escrowFactory: 0n,
  walletFactory: 0n,
  subscriptions: 0n,
  stakingPoolFactory: 0n,
  staking: 0n,
  
  // Social System
  social: 0n,
  socialGraph: 0n,
  socialImpact: 0n,
  socialModeration: 0n,
  
  // Factories
  auctionFactory: 0n,
  marketplace: 0n,
  raffleFactory: 0n,
  pollFactory: 0n,
  prizeBoxFactory: 0n,
  
  // Plugins
  revenueManagerPlugin: 0n,
  updatePlugin: 0n,
  optinPlugin: 0n,
  asaMintPlugin: 0n,
  payPlugin: 0n,
  hyperSwapPlugin: 0n,
  subscriptionsPlugin: 0n,
  auctionPlugin: 0n,
  daoPlugin: 0n,
  dualStakePlugin: 0n,
  gatePlugin: 0n,
  marketplacePlugin: 0n,
  nfdPlugin: 0n,
  paySiloPlugin: 0n,
  paySiloFactoryPlugin: 0n,
  pollPlugin: 0n,
  rafflePlugin: 0n,
  rewardsPlugin: 0n,
  socialPlugin: 0n,
  stakingPlugin: 0n,
  stakingPoolPlugin: 0n,
  
  // Gate & Other
  gate: 0n,
  hyperSwap: 0n,
  metaMerkles: 0n,
  
  // Subgates
  akitaReferrerGate: 0n,
  assetGate: 0n,
  merkleAddressGate: 0n,
  merkleAssetGate: 0n,
  nfdGate: 0n,
  nfdRootGate: 0n,
  pollGate: 0n,
  socialActivityGate: 0n,
  socialFollowerCountGate: 0n,
  socialFollowerIndexGate: 0n,
  socialImpactGate: 0n,
  socialModeratorGate: 0n,
  stakingAmountGate: 0n,
  stakingPowerGate: 0n,
  subscriptionGate: 0n,
  subscriptionStreakGate: 0n,
  
  // Assets - these are the real mainnet AKTA asset ID
  akta: 523683256n, // Real AKTA mainnet asset ID
  bones: 0n,
  
  // External Apps
  vrfBeacon: 1615566206n,
  nfdRegistry: 760937186n,
  assetInbox: 2449590623n,
  akitaNfd: 765902356n,
};

/**
 * Map of network to app IDs
 */
export const NETWORK_APP_IDS: Record<AkitaNetwork, NetworkAppIds> = {
  localnet: LOCALNET_APP_IDS,
  testnet: TESTNET_APP_IDS,
  mainnet: MAINNET_APP_IDS,
};

/**
 * Get app IDs for a specific network
 * @param network - The network to get app IDs for
 * @returns The app IDs for the network
 */
export function getNetworkAppIds(network: AkitaNetwork): NetworkAppIds {
  return NETWORK_APP_IDS[network];
}

/**
 * Mapping from SDK/env var names to NetworkAppIds keys
 */
export const ENV_TO_NETWORK_KEY: Record<string, keyof NetworkAppIds> = {
  DAO_APP_ID: 'dao',
  WALLET_APP_ID: 'wallet',
  ESCROW_FACTORY_APP_ID: 'escrowFactory',
  WALLET_FACTORY_APP_ID: 'walletFactory',
  SUBSCRIPTIONS_APP_ID: 'subscriptions',
  STAKING_POOL_FACTORY_APP_ID: 'stakingPoolFactory',
  STAKING_APP_ID: 'staking',
  REWARDS_APP_ID: 'staking', // Note: rewards uses the rewardsPlugin key
  
  // Social System
  SOCIAL_APP_ID: 'social',
  SOCIAL_GRAPH_APP_ID: 'socialGraph',
  SOCIAL_IMPACT_APP_ID: 'socialImpact',
  SOCIAL_MODERATION_APP_ID: 'socialModeration',
  
  // Factories
  AUCTION_FACTORY_APP_ID: 'auctionFactory',
  MARKETPLACE_APP_ID: 'marketplace',
  RAFFLE_FACTORY_APP_ID: 'raffleFactory',
  POLL_FACTORY_APP_ID: 'pollFactory',
  PRIZE_BOX_FACTORY_APP_ID: 'prizeBoxFactory',
  
  // Plugins
  REVENUE_MANAGER_PLUGIN_APP_ID: 'revenueManagerPlugin',
  UPDATE_PLUGIN_APP_ID: 'updatePlugin',
  OPTIN_PLUGIN_APP_ID: 'optinPlugin',
  ASA_MINT_PLUGIN_APP_ID: 'asaMintPlugin',
  PAY_PLUGIN_APP_ID: 'payPlugin',
  HYPER_SWAP_PLUGIN_APP_ID: 'hyperSwapPlugin',
  SUBSCRIPTIONS_PLUGIN_APP_ID: 'subscriptionsPlugin',
  AUCTION_PLUGIN_APP_ID: 'auctionPlugin',
  DAO_PLUGIN_APP_ID: 'daoPlugin',
  DUAL_STAKE_PLUGIN_APP_ID: 'dualStakePlugin',
  GATE_PLUGIN_APP_ID: 'gatePlugin',
  MARKETPLACE_PLUGIN_APP_ID: 'marketplacePlugin',
  NFD_PLUGIN_APP_ID: 'nfdPlugin',
  PAY_SILO_PLUGIN_APP_ID: 'paySiloPlugin',
  PAY_SILO_FACTORY_PLUGIN_APP_ID: 'paySiloFactoryPlugin',
  POLL_PLUGIN_APP_ID: 'pollPlugin',
  RAFFLE_PLUGIN_APP_ID: 'rafflePlugin',
  REWARDS_PLUGIN_APP_ID: 'rewardsPlugin',
  SOCIAL_PLUGIN_APP_ID: 'socialPlugin',
  STAKING_PLUGIN_APP_ID: 'stakingPlugin',
  STAKING_POOL_PLUGIN_APP_ID: 'stakingPoolPlugin',
  
  // Gate & Other
  GATE_APP_ID: 'gate',
  HYPER_SWAP_APP_ID: 'hyperSwap',
  META_MERKLES_APP_ID: 'metaMerkles',
  
  // Subgates
  AKITA_REFERRER_GATE_APP_ID: 'akitaReferrerGate',
  ASSET_GATE_APP_ID: 'assetGate',
  MERKLE_ADDRESS_GATE_APP_ID: 'merkleAddressGate',
  MERKLE_ASSET_GATE_APP_ID: 'merkleAssetGate',
  NFD_GATE_APP_ID: 'nfdGate',
  NFD_ROOT_GATE_APP_ID: 'nfdRootGate',
  POLL_GATE_APP_ID: 'pollGate',
  SOCIAL_ACTIVITY_GATE_APP_ID: 'socialActivityGate',
  SOCIAL_FOLLOWER_COUNT_GATE_APP_ID: 'socialFollowerCountGate',
  SOCIAL_FOLLOWER_INDEX_GATE_APP_ID: 'socialFollowerIndexGate',
  SOCIAL_IMPACT_GATE_APP_ID: 'socialImpactGate',
  SOCIAL_MODERATOR_GATE_APP_ID: 'socialModeratorGate',
  STAKING_AMOUNT_GATE_APP_ID: 'stakingAmountGate',
  STAKING_POWER_GATE_APP_ID: 'stakingPowerGate',
  SUBSCRIPTION_GATE_APP_ID: 'subscriptionGate',
  SUBSCRIPTION_STREAK_GATE_APP_ID: 'subscriptionStreakGate',
  
  // Assets
  AKTA_ASSET_ID: 'akta',
  BONES_ASSET_ID: 'bones',
};

/**
 * Get a specific app ID from the network config
 * @param network - The network
 * @param envVarName - The environment variable name (e.g., 'DAO_APP_ID')
 * @returns The app ID, or undefined if not found or is 0
 */
export function getAppIdFromNetwork(network: AkitaNetwork, envVarName: string): bigint | undefined {
  const networkAppIds = getNetworkAppIds(network);
  
  const key = ENV_TO_NETWORK_KEY[envVarName];
  if (!key) return undefined;
  
  const appId = networkAppIds[key];
  return appId > 0n ? appId : undefined;
}

