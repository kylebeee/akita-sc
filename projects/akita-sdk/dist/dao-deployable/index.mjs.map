{"version":3,"sources":["../../src/dao-deployable/index.ts"],"sourcesContent":["import { GroupReturn, MaybeSigner, NewContractSDKParams } from \"../types\";\nimport { WalletSDK } from \"../wallet\";\nimport { AkitaDaoSDK } from \"../dao\";\n\nexport { AkitaDaoSDK };\n\n/**\n * Extended DAO SDK that includes the setup() method for initial deployment.\n * Use this SDK when deploying and setting up a new DAO instance.\n * For interacting with an already-deployed DAO, use AkitaDaoSDK from 'akita-sdk/dao'.\n */\nexport class AkitaDaoDeployableSDK extends AkitaDaoSDK {\n\n  constructor(params: NewContractSDKParams) {\n    super(params);\n  }\n\n  async setup(params?: MaybeSigner): Promise<GroupReturn> {\n\n    const sendParams = this.getSendParams(params);\n\n    const group = this.client.newGroup()\n\n    group.setup({\n      ...sendParams,\n      args: { nickname: 'Akita DAO' },\n      maxFee: (6_000).microAlgo()\n    })\n\n    group.opUp({ args: {}, maxFee: (1_000).microAlgos() })\n\n    const result = await group.send({ ...sendParams })\n\n    if (result.returns === undefined) {\n      throw new Error('Failed to setup Akita DAO');\n    }\n\n    this.wallet = new WalletSDK({\n      algorand: this.algorand,\n      factoryParams: {\n        appId: result.returns[0] as bigint,\n        defaultSender: sendParams.sender,\n        defaultSigner: sendParams.signer\n      }\n    })\n\n    await this.wallet.register({ ...sendParams, escrow: '' })\n\n    return result;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AAWO,IAAM,wBAAN,cAAoC,YAAY;AAAA,EAErD,YAAY,QAA8B;AACxC,UAAM,MAAM;AAAA,EACd;AAAA,EAEA,MAAM,MAAM,QAA4C;AAEtD,UAAM,aAAa,KAAK,cAAc,MAAM;AAE5C,UAAM,QAAQ,KAAK,OAAO,SAAS;AAEnC,UAAM,MAAM;AAAA,MACV,GAAG;AAAA,MACH,MAAM,EAAE,UAAU,YAAY;AAAA,MAC9B,QAAS,IAAO,UAAU;AAAA,IAC5B,CAAC;AAED,UAAM,KAAK,EAAE,MAAM,CAAC,GAAG,QAAS,IAAO,WAAW,EAAE,CAAC;AAErD,UAAM,SAAS,MAAM,MAAM,KAAK,EAAE,GAAG,WAAW,CAAC;AAEjD,QAAI,OAAO,YAAY,QAAW;AAChC,YAAM,IAAI,MAAM,2BAA2B;AAAA,IAC7C;AAEA,SAAK,SAAS,IAAI,UAAU;AAAA,MAC1B,UAAU,KAAK;AAAA,MACf,eAAe;AAAA,QACb,OAAO,OAAO,QAAQ,CAAC;AAAA,QACvB,eAAe,WAAW;AAAA,QAC1B,eAAe,WAAW;AAAA,MAC5B;AAAA,IACF,CAAC;AAED,UAAM,KAAK,OAAO,SAAS,EAAE,GAAG,YAAY,QAAQ,GAAG,CAAC;AAExD,WAAO;AAAA,EACT;AACF;","names":[]}