#pragma version 11
#pragma typetrack false

// @algorandfoundation/algorand-typescript/arc4/index.d.ts::Contract.approvalProgram() -> uint64:
main:
    intcblock 0 1
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:15
    // export class PaySiloFactoryPlugin extends Contract {
    txn NumAppArgs
    bz main___algots__.defaultCreate@5
    pushbytes 0x0d9b6c5e // method "mint(uint64,bool,address)uint64"
    txna ApplicationArgs 0
    match main_mint_route@3
    err

main_mint_route@3:
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:17-21
    // mint(
    //   wallet: Application,
    //   rekeyBack: boolean,
    //   recipient: Account
    // ): uint64 {
    txn OnCompletion
    !
    txn ApplicationID
    &&
    assert // OnCompletion must be NoOp && can only call when not creating
    b mint

main___algots__.defaultCreate@5:
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:15
    // export class PaySiloFactoryPlugin extends Contract {
    txn OnCompletion
    !
    txn ApplicationID
    !
    &&
    return // on error: OnCompletion must be NoOp && can only call when creating


// smart_contracts/arc58/plugins/pay-silo/factory.algo.ts::PaySiloFactoryPlugin.mint[routing]() -> void:
mint:
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:17-21
    // mint(
    //   wallet: Application,
    //   rekeyBack: boolean,
    //   recipient: Account
    // ): uint64 {
    txna ApplicationArgs 1
    dup
    len
    pushint 8 // 8
    ==
    assert // invalid number of bytes for uint64
    btoi
    dup
    txna ApplicationArgs 2
    dup
    len
    intc_1 // 1
    ==
    assert // invalid number of bytes for bool8
    intc_0 // 0
    getbit
    txna ApplicationArgs 3
    dup
    cover 3
    len
    pushint 32 // 32
    ==
    assert // invalid number of bytes for uint8[32]
    // smart_contracts/utils/functions.ts:266-269
    // const [spendingAddressBytes] = op.AppGlobal.getExBytes(
    //   wallet,
    //   Bytes(AbstractAccountGlobalStateKeysSpendingAddress)
    // )
    swap
    // smart_contracts/utils/functions.ts:268
    // Bytes(AbstractAccountGlobalStateKeysSpendingAddress)
    pushbytes "spending_address"
    // smart_contracts/utils/functions.ts:266-269
    // const [spendingAddressBytes] = op.AppGlobal.getExBytes(
    //   wallet,
    //   Bytes(AbstractAccountGlobalStateKeysSpendingAddress)
    // )
    app_global_get_ex
    pop
    swap
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:26-30
    // const result = paySilo.call.create({
    //   sender,
    //   args: [recipient],
    //   rekeyTo: rekeyAddress(rekeyBack, wallet)
    // })
    itxn_begin
    // smart_contracts/utils/functions.ts:322
    // if (!rekeyBack) {
    bnz mint_after_if_else@5
    // smart_contracts/utils/functions.ts:323
    // return Global.zeroAddress
    global ZeroAddress

mint_after_inlined_smart_contracts/utils/functions.ts::rekeyAddress@6:
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:26-30
    // const result = paySilo.call.create({
    //   sender,
    //   args: [recipient],
    //   rekeyTo: rekeyAddress(rekeyBack, wallet)
    // })
    pushbytes 0xcc694eaa // method "create(address)void"
    itxn_field ApplicationArgs
    dig 2
    itxn_field ApplicationArgs
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:24
    // const paySilo = compileArc4(PaySiloPlugin)
    intc_0 // 0
    itxn_field ExtraProgramPages
    intc_0 // 0
    itxn_field LocalNumUint
    intc_0 // 0
    itxn_field LocalNumByteSlice
    intc_1 // 1
    itxn_field GlobalNumByteSlice
    intc_0 // 0
    itxn_field GlobalNumUint
    pushbytes base64(C4EBQw==)
    itxn_field ClearStateProgramPages
    pushbytes base64(CyAEAAEQCCYBCXJlY2lwaWVudDEZFEQxGEEADoAE4EdSYjYaAI4BAC4AgATMaU6qNhoAjgEAEgCKAgGL/kAAAzIDiYv/cghEiTYaAUkVgSASRChMZyNDIkmAAEk2GgFJFSUSRBdJNhoCSRUjEkQiU0w2GgNJTgJJIllJTgMkC4ECCEwVEkSAEHNwZW5kaW5nX2FkZHJlc3NlSCJJSwMMQQCQSwNXAgBLASQLJFhJIltJTgJFCSVbRQlAADuxIihlTEULREsCIwlLAQ1BAB8yA7IgSweyCEsJsgdLAbIAI7IQIrIBs0kjCEUBQv+uSwRLBoj/REL/2bEiKGVMRQpESwIjCUsBDUEAHzIDsiBLBrIRSweyEksIshRLAbIAgQSyECKyAbNC/71LBEsGiP8JQv/ZI0M=)
    itxn_field ApprovalProgramPages
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:26-30
    // const result = paySilo.call.create({
    //   sender,
    //   args: [recipient],
    //   rekeyTo: rekeyAddress(rekeyBack, wallet)
    // })
    intc_0 // 0
    itxn_field OnCompletion
    itxn_field RekeyTo
    dup
    itxn_field Sender
    pushint 6 // appl
    itxn_field TypeEnum
    intc_0 // 0
    itxn_field Fee
    itxn_submit
    itxn CreatedApplicationID
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:17-21
    // mint(
    //   wallet: Application,
    //   rekeyBack: boolean,
    //   recipient: Account
    // ): uint64 {
    itob
    pushbytes 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

mint_after_if_else@5:
    // smart_contracts/utils/functions.ts:326
    // return wallet.address
    dig 2
    app_params_get AppAddress
    assert // application exists
    // smart_contracts/arc58/plugins/pay-silo/factory.algo.ts:29
    // rekeyTo: rekeyAddress(rekeyBack, wallet)
    b mint_after_inlined_smart_contracts/utils/functions.ts::rekeyAddress@6
