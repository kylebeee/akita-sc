#pragma version 10
intcblock 1 6

// This TEAL was generated by TEALScript v0.106.1
// https://github.com/algorandfoundation/TEALScript

// This contract is compliant with and/or implements the following ARCs: [ ARC4 ]

// The following ten lines of TEAL handle initial program flow
// This pattern is used to make it easy for anyone to parse the start of the program and determine if a specific action is allowed
// Here, action refers to the OnComplete in combination with whether the app is being created or called
// Every possible action for this contract is represented in the switch statement
// If the action is not implemented in the contract, its respective branch will be "*NOT_IMPLEMENTED" which just contains "err"
txn ApplicationID
!
intc 1 // 6
*
txn OnCompletion
+
switch *call_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *create_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED

*NOT_IMPLEMENTED:
	// The requested action is not implemented in this contract. Are you using the correct OnComplete? Did you set your app ID?
	err

// mint(pay,uint64,uint64,uint64,uint64,string,string[])uint64
*abi_route_mint:
	// The ABI return prefix
	pushbytes 0x151f7c75

	// options: string[]
	txna ApplicationArgs 6

	// question: string
	txna ApplicationArgs 5
	extract 2 0

	// selectionMax: uint64
	txna ApplicationArgs 4
	btoi

	// endTime: uint64
	txna ApplicationArgs 3
	btoi

	// gateID: uint64
	txna ApplicationArgs 2
	btoi

	// type: uint64
	txna ApplicationArgs 1
	btoi

	// pmt: pay
	txn GroupIndex
	intc 0 // 1
	-
	dup
	gtxns TypeEnum
	intc 0 //  pay
	==

	// argument 6 (pmt) for mint must be a pay transaction
	assert

	// execute mint(pay,uint64,uint64,uint64,uint64,string,string[])uint64
	callsub mint
	itob
	concat
	log
	intc 0 // 1
	return

// mint(pmt: PayTxn, type: PollType, gateID: uint64, endTime: uint64, selectionMax: uint64, question: string, options: string[]): AppID
mint:
	proto 7 1

	// contracts/actions/poll_factory.algo.ts:17
	// assert(pmt.amount === (
	//                 100_000 // requires 3 extra pages
	//                 + (28_500 * Poll.schema.global.numUint)
	//                 + (50_000 * Poll.schema.global.numByteSlice)
	//             )
	//         )
	frame_dig -1 // pmt: PayTxn
	gtxns Amount
	pushint 713500
	==
	assert

	// contracts/actions/poll_factory.algo.ts:23
	// assert(pmt.receiver === this.app.address)
	frame_dig -1 // pmt: PayTxn
	gtxns Receiver
	global CurrentApplicationAddress
	==
	assert

	// contracts/actions/poll_factory.algo.ts:25
	// sendMethodCall<typeof Poll.prototype.createApplication>({
	//             methodArgs: [
	//                 type,
	//                 gateID,
	//                 endTime,
	//                 selectionMax,
	//                 question,
	//                 options,
	//             ],
	//             approvalProgram: Poll.approvalProgram(),
	//             clearStateProgram: Poll.clearProgram(),
	//             globalNumUint: Poll.schema.global.numUint,
	//             globalNumByteSlice: Poll.schema.global.numByteSlice,
	//             // extraProgramPages: 1,
	//             fee: 0,
	//         })
	itxn_begin
	intc 1 //  appl
	itxn_field TypeEnum
	pushbytes 0xb0cc8088 // method "createApplication(uint64,uint64,uint64,uint64,string,string[])void"
	itxn_field ApplicationArgs

	// contracts/actions/poll_factory.algo.ts:26
	// methodArgs: [
	//                 type,
	//                 gateID,
	//                 endTime,
	//                 selectionMax,
	//                 question,
	//                 options,
	//             ]
	frame_dig -2 // type: PollType
	itob
	itxn_field ApplicationArgs
	frame_dig -3 // gateID: uint64
	itob
	itxn_field ApplicationArgs
	frame_dig -4 // endTime: uint64
	itob
	itxn_field ApplicationArgs
	frame_dig -5 // selectionMax: uint64
	itob
	itxn_field ApplicationArgs
	frame_dig -6 // question: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs
	frame_dig -7 // options: string[]
	itxn_field ApplicationArgs

	// contracts/actions/poll_factory.algo.ts:34
	// approvalProgram: Poll.approvalProgram()
	pushbytes 0x0a20080100080203040605260c09626f785f636f756e7404747970650b766f7465735f74687265650a766f7465735f666f75720a766f7465735f6669766509766f7465735f6f6e6509766f7465735f74776f08656e645f74696d650c6d61785f73656c65637465640c6f7074696f6e5f636f756e7407676174655f69640031181421060b3119088d0c046a00000000000000000000045c00000000000000000000008a01018bff730248320a12898a0101b12106b2108004b5feb87bb21a23b218270a6416b21a8bffb21a23b201b3b43b2209c53a5704002353898a0101b12106b2108004d574bb10b21a22b2188bffb21a23b201b3b43b2209c53a5704001789361a06361a05570200361a0417361a0317361a0217361a011788000222438a0600320d23134432078bfd0c448bff21050c44298bff67270a8bfe6727078bfd6780087175657374696f6e8bfb4915165706024c50678bfa2359250f494100088bfa235921070e10448bff2212494000068bff210412114100188bfc250f4941000a8bfc8bfa235922090e104427088bfc6727098bfa235967282367800a6f7074696f6e5f6f6e658bfa35ff2534ff34ff4f025925084934ff4c59220b2508585702004915165706024c5067800a6f7074696f6e5f74776f8bfa35ff210534ff34ff4f025925084934ff4c59220b2508585702004915165706024c50678bfa235921040f410033800c6f7074696f6e5f74687265658bfa35ff210634ff34ff4f025925084934ff4c59220b2508585702004915165706024c50678bfa235921050f410031800b6f7074696f6e5f666f75728bfa35ff2434ff34ff4f025925084934ff4c59220b2508585702004915165706024c50678bfa235921070f410032800b6f7074696f6e5f666976658bfa35ff810a34ff34ff4f025925084934ff4c59220b2508585702004915165706024c506789361a04361a03570200361a0249152212442353361a011788000222438a0400270b4932072707640e448bff72084888fdbf448bff720848bd4c4814448bfd15240a21070e494100088bfd15240a220f10448bfc88fda644b122b2108bff720848b200320ab20781c477b2088bfe4100088bff7208484200023203b22023b201b3228c00296425124940000629642104121141000a8bff72084888fd8d8c002964231249400005296425121141008d8bfd15240a2212448bfd35ff34ff57000817231241000c270564220827054c674200678bfd35ff34ff57000817221241000c270664220827064c6742004c8bfd35ff34ff57000817251241000a2a6422082a4c674200338bfd35ff34ff5700081721041241000a2b6422082b4c674200198bfd35ff34ff57000817210512410009270464220827044c674200dd8bfd15240a2708640e44238c018b018bfd15240a0c4100c58bfd35ff238b01240b0834ff4c24581727096422090e448bfd35ff238b01240b0834ff4c245817231241000d2705648b000827054c674200838bfd35ff238b01240b0834ff4c245817221241000d2706648b000827064c674200618bfd35ff238b01240b0834ff4c245817251241000b2a648b00082a4c674200418bfd35ff238b01240b0834ff4c24581721041241000b2b648b00082b4c674200208bfd35ff238b01240b0834ff4c24581721051241000a2704648b000827044c678b0122088c0142ff308bff72084823b94828642208284c6789361a0149158120124488000222438a010032072707640d448bffbc28642209284c67898004b0cc8088361a008e01fbf7008004dcaf051680042a21d467361a008e02fd92ffba00
	itxn_field ApprovalProgram

	// contracts/actions/poll_factory.algo.ts:35
	// clearStateProgram: Poll.clearProgram()
	pushbytes 0x0a
	itxn_field ClearStateProgram

	// contracts/actions/poll_factory.algo.ts:36
	// globalNumUint: Poll.schema.global.numUint
	pushint 11
	itxn_field GlobalNumUint

	// contracts/actions/poll_factory.algo.ts:37
	// globalNumByteSlice: Poll.schema.global.numByteSlice
	intc 1 // 6
	itxn_field GlobalNumByteSlice

	// contracts/actions/poll_factory.algo.ts:39
	// fee: 0
	pushint 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/actions/poll_factory.algo.ts:43
	// return this.itxn.createdApplicationID;
	itxn CreatedApplicationID
	retsub

*abi_route_createApplication:
	intc 0 // 1
	return

*create_NoOp:
	pushbytes 0xb8447b36 // method "createApplication()void"
	txna ApplicationArgs 0
	match *abi_route_createApplication

	// this contract does not implement the given ABI method for create NoOp
	err

*call_NoOp:
	pushbytes 0x5ac8305d // method "mint(pay,uint64,uint64,uint64,uint64,string,string[])uint64"
	txna ApplicationArgs 0
	match *abi_route_mint

	// this contract does not implement the given ABI method for call NoOp
	err