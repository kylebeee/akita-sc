#pragma version 10
intcblock 1 6
bytecblock 0x7265766f636174696f6e5f6170705f6964 0x76657273696f6e

// This TEAL was generated by TEALScript v0.106.0
// https://github.com/algorandfoundation/TEALScript

// This contract is compliant with and/or implements the following ARCs: [ ARC4 ]

// The following ten lines of TEAL handle initial program flow
// This pattern is used to make it easy for anyone to parse the start of the program and determine if a specific action is allowed
// Here, action refers to the OnComplete in combination with whether the app is being created or called
// Every possible action for this contract is represented in the switch statement
// If the action is not implemented in the contract, its respective branch will be "*NOT_IMPLEMENTED" which just contains "err"
txn ApplicationID
!
intc 1 // 6
*
txn OnCompletion
+
switch *call_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *call_UpdateApplication *NOT_IMPLEMENTED *create_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED

*NOT_IMPLEMENTED:
	// The requested action is not implemented in this contract. Are you using the correct OnComplete? Did you set your app ID?
	err

// createApplication(string,uint64)void
*abi_route_createApplication:
	// revocationAppID: uint64
	txna ApplicationArgs 2
	btoi

	// version: string
	txna ApplicationArgs 1
	extract 2 0

	// execute createApplication(string,uint64)void
	callsub createApplication
	intc 0 // 1
	return

// createApplication(version: string, revocationAppID: AppID): void
createApplication:
	proto 2 0

	// contracts/arc58/abstracted_account_factory.algo.ts:10
	// this.abstractedAccountVersion.value = version
	bytec 1 //  "version"
	frame_dig -1 // version: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	app_global_put

	// contracts/arc58/abstracted_account_factory.algo.ts:11
	// this.revocationAppID.value = revocationAppID
	bytec 0 //  "revocation_app_id"
	frame_dig -2 // revocationAppID: AppID
	app_global_put
	retsub

// updateApplication()void
*abi_route_updateApplication:
	// execute updateApplication()void
	callsub updateApplication
	intc 0 // 1
	return

// updateApplication(): void
updateApplication:
	proto 0 0

	// contracts/arc58/abstracted_account_factory.algo.ts:15
	// assert(this.txn.sender === this.app.creator)
	txn Sender
	txna Applications 0
	app_params_get AppCreator
	pop
	==
	assert
	retsub

// mint(pay,address,string)uint64
*abi_route_mint:
	// The ABI return prefix
	pushbytes 0x151f7c75

	// nickname: string
	txna ApplicationArgs 2
	extract 2 0

	// admin: address
	txna ApplicationArgs 1
	dup
	len
	pushint 32
	==

	// argument 1 (admin) for mint must be a address
	assert

	// pmt: pay
	txn GroupIndex
	intc 0 // 1
	-
	dup
	gtxns TypeEnum
	intc 0 //  pay
	==

	// argument 2 (pmt) for mint must be a pay transaction
	assert

	// execute mint(pay,address,string)uint64
	callsub mint
	itob
	concat
	log
	intc 0 // 1
	return

// mint(pmt: PayTxn, admin: Address, nickname: string): AppID
mint:
	proto 3 1

	// contracts/arc58/abstracted_account_factory.algo.ts:19
	// assert(pmt.amount === (
	//                 300_000 // requires 3 extra pages
	//                 + (28_500 * AbstractedAccount.schema.global.numUint)
	//                 + (50_000 * AbstractedAccount.schema.global.numByteSlice)
	//             )
	//         )
	frame_dig -1 // pmt: PayTxn
	gtxns Amount
	pushint 507000
	==
	assert

	// contracts/arc58/abstracted_account_factory.algo.ts:25
	// assert(pmt.receiver === this.app.address)
	frame_dig -1 // pmt: PayTxn
	gtxns Receiver
	global CurrentApplicationAddress
	==
	assert

	// contracts/arc58/abstracted_account_factory.algo.ts:27
	// sendMethodCall<typeof AbstractedAccount.prototype.createApplication>({
	//             methodArgs: [
	//                 this.abstractedAccountVersion.value,
	//                 admin,
	//                 this.revocationAppID.value,
	//                 nickname,
	//             ],
	//             approvalProgram: AbstractedAccount.approvalProgram(),
	//             clearStateProgram: AbstractedAccount.clearProgram(),
	//             globalNumUint: AbstractedAccount.schema.global.numUint,
	//             globalNumByteSlice: AbstractedAccount.schema.global.numByteSlice,
	//             extraProgramPages: 1,
	//             fee: 0,
	//         })
	itxn_begin
	intc 1 //  appl
	itxn_field TypeEnum
	pushbytes 0x69a7853d // method "createApplication(string,address,uint64,string)void"
	itxn_field ApplicationArgs

	// contracts/arc58/abstracted_account_factory.algo.ts:28
	// methodArgs: [
	//                 this.abstractedAccountVersion.value,
	//                 admin,
	//                 this.revocationAppID.value,
	//                 nickname,
	//             ]
	bytec 1 //  "version"
	app_global_get
	extract 2 0
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs
	frame_dig -2 // admin: Address
	itxn_field ApplicationArgs
	bytec 0 //  "revocation_app_id"
	app_global_get
	itob
	itxn_field ApplicationArgs
	frame_dig -3 // nickname: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs

	// contracts/arc58/abstracted_account_factory.algo.ts:34
	// approvalProgram: AbstractedAccount.approvalProgram()
	pushbytes 0x0a2006010004200618260c000170016d016e0561646d696e117265766f636174696f6e5f6170705f69640100086e69636b6e616d650800000000000000000776657273696f6e040f88549304151f7c7531181421040b3119088d0c08c0000000000000094a000008b200000000000000000000008a0001310027046412494000243100bd4c484941001a3100be44570200800f616b6974612e636f6d6d756e697479121011898a0001310027056472084812898a0200288bff168bfe508c00298b0050bd4c4844298b0050be4435ff34ff5700081732060f443206298b0050be4435ff34ff5710081709298b0050be4435ff34ff570808170f44898a0201288bff168bfe508c00298b0050bd4c4849410012298b0050be4435ff34ff5700081732060f10494100213206298b0050be4435ff34ff5710081709298b0050be4435ff34ff570808170f108c00898a01018bff3800320a12494100088bff3820320a121041000222898bff3810210412494100098bff38183632001210494100078bff381b221210494100078bff3819231210494100098bff391a00270a1210898a0000284702238c00311622088c018b0132040c4100188b018c028b0288ff8d410003228c008b0122088c0142ffe08b0044898a030028470a8bff163203508c008bff163100508c01238c028bfe49410011298b0050be4435ff34ff57180817230d108c038bfd49410011298b0150be4435ff34ff57180817230d108c04311622088c058b0532040c41005e8b058c068b0688ff18410003228c028b03144940000a32038bff8b06880043118c078bfe494100038b07108c088b04144940000a31008bff8b06880025118c098bfd494100038b09108c0a8b08494000038b0a11448b0522088c0542ff9a8b0244898a0301288bff3810210413494000158bff38188bfe13494100098bff3818363200131011494000128bfd320313494100088bff38008bfd131011494000068bff88fe7c114100042242003f8bff381b230d448bff391a00152412448bfe168bfd508bff391a00800400000000504957040028a844570004508c002a8b0050bd4c481441000423420001228c0089361a04570200361a0317361a024915251244361a0157020088000222438a0400320d23134427098bff4915165706024c506727048bfe6727058bfd6727078bfc4915165706024c5067800e666163746f72795f6170705f6964320d6789361a0157020088000222438a010088fcec4427098bff4915165706024c506789361a011788000222438a010088fcce4427058bff6789361a0157020088000222438a010088fcb64427078bff4915165706024c506789361a01491525124488000222438a010088fc944427048bff6789361a034915251244361a024915251244361a011788000222438a03002831008bff7208481244320a7302488bff72084812448bff168bfe508c00298b0050bd4c484941000f298b0050be4435ff34ff81800253104427048bfd6789270b88000450b022438a00012704648988000222438a0000320a7302483203124489361a0249152212442353361a01491525124488000222438a020088fbf344b122b2108bffb2078bffb22023b201b38bfe41000388fd0589270b361a024915251244361a011788000a2706234f025450b022438a02012832038bff88fc3a8c008b00410004224200078bfe8bff88fc288c0089361a011788000222438a0100284703298bff1632035050bd4c488c00298bff1631005050bd4c488c01238c02238c038b0041000932038bff88fbea8c028b0141000931008bff88fbdc8c038b0014494100048b011410494000138b00494100048b021410494100048b0314101141000a32038bff88fb6642001c8b01494100048b031410494100048b02141041000731008bff88fb478b038b028bff88fc5db122b210320ab2078bff720848b220801672656b6579696e6720746f20706c7567696e20617070b20523b201b3298bff168b02410005320342000231005050be4435ff34ff8110320616298bff168b024100053203420002310050504e02bb89361a0157020088000222438a01002381082b8bff504e02ba1788feee89361a06570200361a0549152212442353361a0417361a0317361a024915251244361a011788000222438a0600284988fa51448bff168bfe508c00298b00508bfd168bfc16502708508bfa15240a16502706238bfb5450bf238c018b018bfa15240a0c4100242a8bff168bfe508bfa35ff238b01240b0834ff4c2458505023b9488b0122088c0142ffd189361a02570200361a01491525124488000222438a020088f9df448bff49bc488bfe4915165706024c50bf89361a03570200361a024915251244361a011788000222438a030028470388f9ad4940000488f9d811448bff168bfe508c00298b0050bd4c4844298b0050be4435ff34ff571808178c01238c028b028bfd15240a0c4100348bff168bfe508bfd35ff238b02240b0834ff4c2458508c032a8b0350bd4c48448b0122098c012a8b0350bc8b0222088c0242ffc18b01231244298b0050bc89361a07570200361a0649152212442353361a0517361a0417361a034915251244361a0217361a0157020088000222438a070028470288f8ff442b8bff50bd4c4814448bfe168bfd508c002b8bff508b00bf8bfc168bfb16502708508bf915240a16502706238bfa54508c01298b00508b01bf238c028b028bf915240a0c4100242a8bfe168bfd508bf935ff238b02240b0834ff4c2458505023b9488b0222088c0242ffd189361a0157020088000222438a01002888f8804940000488f8ab11442b8bff50bd4c48442b8bff508c00298b00be4450bd4c4844298b00be4450be4435ff34ff571808172312442b8bff50bc298b00be4450bc89361a034915241244361a024915251244361a011788000222438a0300284988f81e448bff168bfe508c008bff168bfe508bfd508c01298b0050bd4c48442a8b0150bd4c481444298b0050be4435ff34ff2105298b0050be4435ff34ff57180817220816298b00504e02bb2a8bff168bfe508bfd505023b94889361a034915241244361a024915251244361a011788000222438a0300284988f7a54940000488f7d011448bff168bfe508c008bff168bfe508bfd508c01298b0050bd4c48442a8b0150bd4c4844298b0050be4435ff34ff2105298b0050be4435ff34ff57180817220916298b00504e02bb2a8b0150bc89800469a7853d361a008e01f9e8008004e500dfb680049f91cccd8004d24b755680045fa449c6800413bc44e4270a8004c95a5d3d8004e9026da880047c766ddc800456f28b5880044e23cbd1800457a51d888004824404d78004b9ccb4648004e350b9d48004516a015f8004185607c5361a008e11f9dbf9f1fa11fa2bfa86fa96faa8fadffb1afc19fc36fcc0fcebfd81fe26fe79fef20080041747405b361a008e01f9ad00
	itxn_field ApprovalProgram

	// contracts/arc58/abstracted_account_factory.algo.ts:35
	// clearStateProgram: AbstractedAccount.clearProgram()
	pushbytes 0x0a
	itxn_field ClearStateProgram

	// contracts/arc58/abstracted_account_factory.algo.ts:36
	// globalNumUint: AbstractedAccount.schema.global.numUint
	pushint 2
	itxn_field GlobalNumUint

	// contracts/arc58/abstracted_account_factory.algo.ts:37
	// globalNumByteSlice: AbstractedAccount.schema.global.numByteSlice
	pushint 3
	itxn_field GlobalNumByteSlice

	// contracts/arc58/abstracted_account_factory.algo.ts:38
	// extraProgramPages: 1
	intc 0 // 1
	itxn_field ExtraProgramPages

	// contracts/arc58/abstracted_account_factory.algo.ts:39
	// fee: 0
	pushint 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/arc58/abstracted_account_factory.algo.ts:42
	// return this.itxn.createdApplicationID;
	itxn CreatedApplicationID
	retsub

*create_NoOp:
	pushbytes 0xbf2e1e78 // method "createApplication(string,uint64)void"
	txna ApplicationArgs 0
	match *abi_route_createApplication

	// this contract does not implement the given ABI method for create NoOp
	err

*call_NoOp:
	pushbytes 0x88f292b4 // method "mint(pay,address,string)uint64"
	txna ApplicationArgs 0
	match *abi_route_mint

	// this contract does not implement the given ABI method for call NoOp
	err

*call_UpdateApplication:
	pushbytes 0x46f76533 // method "updateApplication()void"
	txna ApplicationArgs 0
	match *abi_route_updateApplication

	// this contract does not implement the given ABI method for call UpdateApplication
	err