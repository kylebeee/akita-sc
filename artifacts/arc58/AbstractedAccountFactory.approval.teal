#pragma version 10
intcblock 1 6
bytecblock 0x7265766f636174696f6e5f6170705f6964 0x76657273696f6e

// This TEAL was generated by TEALScript v0.105.5
// https://github.com/algorandfoundation/TEALScript

// This contract is compliant with and/or implements the following ARCs: [ ARC4 ]

// The following ten lines of TEAL handle initial program flow
// This pattern is used to make it easy for anyone to parse the start of the program and determine if a specific action is allowed
// Here, action refers to the OnComplete in combination with whether the app is being created or called
// Every possible action for this contract is represented in the switch statement
// If the action is not implemented in the contract, its respective branch will be "*NOT_IMPLEMENTED" which just contains "err"
txn ApplicationID
!
intc 1 // 6
*
txn OnCompletion
+
switch *call_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *call_UpdateApplication *NOT_IMPLEMENTED *create_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED

*NOT_IMPLEMENTED:
	// The requested action is not implemented in this contract. Are you using the correct OnComplete? Did you set your app ID?
	err

// createApplication(string,uint64)void
*abi_route_createApplication:
	// revocationAppID: uint64
	txna ApplicationArgs 2
	btoi

	// version: string
	txna ApplicationArgs 1
	extract 2 0

	// execute createApplication(string,uint64)void
	callsub createApplication
	intc 0 // 1
	return

// createApplication(version: string, revocationAppID: AppID): void
createApplication:
	proto 2 0

	// contracts/arc58/abstracted_account_factory.algo.ts:10
	// this.abstractedAccountVersion.value = version
	bytec 1 //  "version"
	frame_dig -1 // version: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	app_global_put

	// contracts/arc58/abstracted_account_factory.algo.ts:11
	// this.revocationAppID.value = revocationAppID
	bytec 0 //  "revocation_app_id"
	frame_dig -2 // revocationAppID: AppID
	app_global_put
	retsub

// updateApplication()void
*abi_route_updateApplication:
	// execute updateApplication()void
	callsub updateApplication
	intc 0 // 1
	return

// updateApplication(): void
updateApplication:
	proto 0 0

	// contracts/arc58/abstracted_account_factory.algo.ts:15
	// assert(this.txn.sender === this.app.creator)
	txn Sender
	txna Applications 0
	app_params_get AppCreator
	pop
	==
	assert
	retsub

// mint(pay,address,string)uint64
*abi_route_mint:
	// The ABI return prefix
	pushbytes 0x151f7c75

	// nickname: string
	txna ApplicationArgs 2
	extract 2 0

	// admin: address
	txna ApplicationArgs 1
	dup
	len
	pushint 32
	==

	// argument 1 (admin) for mint must be a address
	assert

	// pmt: pay
	txn GroupIndex
	intc 0 // 1
	-
	dup
	gtxns TypeEnum
	intc 0 //  pay
	==

	// argument 2 (pmt) for mint must be a pay transaction
	assert

	// execute mint(pay,address,string)uint64
	callsub mint
	itob
	concat
	log
	intc 0 // 1
	return

// mint(pmt: PayTxn, admin: Address, nickname: string): AppID
mint:
	proto 3 1

	// contracts/arc58/abstracted_account_factory.algo.ts:19
	// assert(pmt.amount === (
	//                 300_000 // requires 3 extra pages
	//                 + (28_500 * AbstractedAccount.schema.global.numUint)
	//                 + (50_000 * AbstractedAccount.schema.global.numByteSlice)
	//             )
	//         )
	frame_dig -1 // pmt: PayTxn
	gtxns Amount
	pushint 507000
	==
	assert

	// contracts/arc58/abstracted_account_factory.algo.ts:25
	// assert(pmt.receiver === this.app.address)
	frame_dig -1 // pmt: PayTxn
	gtxns Receiver
	global CurrentApplicationAddress
	==
	assert

	// contracts/arc58/abstracted_account_factory.algo.ts:27
	// sendMethodCall<typeof AbstractedAccount.prototype.createApplication>({
	//             methodArgs: [
	//                 this.abstractedAccountVersion.value,
	//                 admin,
	//                 this.revocationAppID.value,
	//                 nickname,
	//             ],
	//             approvalProgram: AbstractedAccount.approvalProgram(),
	//             clearStateProgram: AbstractedAccount.clearProgram(),
	//             globalNumUint: AbstractedAccount.schema.global.numUint,
	//             globalNumByteSlice: AbstractedAccount.schema.global.numByteSlice,
	//             extraProgramPages: 1,
	//             fee: 0,
	//         })
	itxn_begin
	intc 1 //  appl
	itxn_field TypeEnum
	pushbytes 0x69a7853d // method "createApplication(string,address,uint64,string)void"
	itxn_field ApplicationArgs

	// contracts/arc58/abstracted_account_factory.algo.ts:28
	// methodArgs: [
	//                 this.abstractedAccountVersion.value,
	//                 admin,
	//                 this.revocationAppID.value,
	//                 nickname,
	//             ]
	bytec 1 //  "version"
	app_global_get
	extract 2 0
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs
	frame_dig -2 // admin: Address
	itxn_field ApplicationArgs
	bytec 0 //  "revocation_app_id"
	app_global_get
	itob
	itxn_field ApplicationArgs
	frame_dig -3 // nickname: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs

	// contracts/arc58/abstracted_account_factory.algo.ts:34
	// approvalProgram: AbstractedAccount.approvalProgram()
	pushbytes 0x0a20050100200406260c0001700561646d696e016e117265766f636174696f6e5f6170705f6964040f885493016d0100086e69636b6e616d650800000000000000000776657273696f6e04151f7c7531181421040b3119088d0c05ad000000000000061f0000059f00000000000000000000008a0000284702238c00311622088c018b0132040c4100698b018c028b023800320a12494100088b023820320a1210410006228c004200498b023810210412494100078b023819231210494100098b0238183632001210494100078b02381b221210494100098b02391a0027051210410006228c004200098b0122088c0142ff8f8b0044898a000131002a6412494000243100bd4c484941001a3100be44570200800f616b6974612e636f6d6d756e697479121011898a0001310027046472084812898a0201288bff168bfe508c00298b0050bd4c4849410012298b0050be4435ff34ff5700081732060f10494100213206298b0050be4435ff34ff5710081709298b0050be4435ff34ff570808170f104941001627068b0050bd4c4814494000088bfe8bff88000511108c00898a02012847058bff168bfe508c0027068b00508c01311622088c028b0232040c4100a88b028c038b033810210413494000158b0338188bff13494100098b033818363200131011494000088b0338008bfe13114100034200698b03391a0027051241000422420064238c04238c058b058b01be4457020015250a0c41003a8b03391a00800400000000504957040028a8445700048b01be4457020035ff238b05250b0834ff4c255812410003228c048b0522088c0542ffb68b04144100042342000a8b0222088c0242ff50228c00460589361a04570200361a0317361a024915241244361a0157020088000222438a0400320d231344270a8bff4915165706024c50672a8bfe6727048bfd6727088bfc4915165706024c5067800e666163746f72795f6170705f6964320d6789361a0157020088000222438a010088fe1944270a8bff4915165706024c506789361a011788000222438a010088fdfb4427048bff6789361a0157020088000222438a010088fde34427088bff4915165706024c506789361a01491524124488000222438a010088fdc1442a8bff6789361a034915241244361a024915241244361a011788000222438a03002831008bff7208481244320a7302488bff72084812448bff168bfe508c00298b0050bd4c484941000f298b0050be4435ff34ff81c0015310442a8bfd6789270b88000450b022438a00012a648988000222438a0000320a7302483203124489361a0249152212442353361a01491524124488000222438a020031002a641244b122b2108bffb2078bffb22023b201b38bfe41000388fc8489270b361a024915241244361a011788000a2707234f025450b022438a02012832038bff88fd1f8c008b00410004224200078bfe8bff88fd0d8c0089361a011788000222438a01002832038bff88fcf68c008b001441000831008bff88fce744b122b210320ab2078bff720848b22023b201b3298bff168b00410005320342000231005050be4435ff34ff8110320616298bff168b004100053203420002310050504e02bb88fbdc89361a0157020088000222438a01002381082b8bff504e02ba1788ff8089361a08570200361a0749152212442353361a06570200361a0549152212442353361a0417361a0317361a024915241244361a011788000222438a08002888fc02448bff168bfe508c00298b00508bfd168bfc16502709502707238bfb5450bf8bfa15250a230d41001527068b005049bc488bfa4915250a165706024c50bf8bf94100168bf815230d448bfe49bc488bf84915165706024c50bf89361a024915241244361a011788000222438a02002888fb904940000488fbba11448bff168bfe508c00298b0050bc89361a0649152212442353361a0517361a0417361a034915241244361a0217361a0157020088000222438a0600284988fb48442b8bff50bd4c4814448bfe168bfd508c002b8bff508b00bf8bfc168bfb16502709502707238bfa54508c01298b00508b01bf89361a0157020088000222438a01002888fb024940000488fb2c11442b8bff508c002b8bff50bc298b00be4450bc89800469a7853d361a008e01fc53008004e500dfb680049f91cccd8004d24b755680045fa449c6800413bc44e427058004c95a5d3d8004e9026da880047c766ddc800456f28b5880049078d1e480044d37235580048a72a7508004e350b9d4361a008e0efc5dfc73fc93fcacfd06fd15fd27fd60fd9bfe08fe25febffeeeff530080041747405b361a008e01fc2f00
	itxn_field ApprovalProgram

	// contracts/arc58/abstracted_account_factory.algo.ts:35
	// clearStateProgram: AbstractedAccount.clearProgram()
	pushbytes 0x0a
	itxn_field ClearStateProgram

	// contracts/arc58/abstracted_account_factory.algo.ts:36
	// globalNumUint: AbstractedAccount.schema.global.numUint
	pushint 2
	itxn_field GlobalNumUint

	// contracts/arc58/abstracted_account_factory.algo.ts:37
	// globalNumByteSlice: AbstractedAccount.schema.global.numByteSlice
	pushint 3
	itxn_field GlobalNumByteSlice

	// contracts/arc58/abstracted_account_factory.algo.ts:38
	// extraProgramPages: 1
	intc 0 // 1
	itxn_field ExtraProgramPages

	// contracts/arc58/abstracted_account_factory.algo.ts:39
	// fee: 0
	pushint 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/arc58/abstracted_account_factory.algo.ts:42
	// return this.itxn.createdApplicationID;
	itxn CreatedApplicationID
	retsub

*create_NoOp:
	pushbytes 0xbf2e1e78 // method "createApplication(string,uint64)void"
	txna ApplicationArgs 0
	match *abi_route_createApplication

	// this contract does not implement the given ABI method for create NoOp
	err

*call_NoOp:
	pushbytes 0x88f292b4 // method "mint(pay,address,string)uint64"
	txna ApplicationArgs 0
	match *abi_route_mint

	// this contract does not implement the given ABI method for call NoOp
	err

*call_UpdateApplication:
	pushbytes 0x46f76533 // method "updateApplication()void"
	txna ApplicationArgs 0
	match *abi_route_updateApplication

	// this contract does not implement the given ABI method for call UpdateApplication
	err