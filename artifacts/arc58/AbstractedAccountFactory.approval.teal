#pragma version 10
intcblock 1 4 6
bytecblock 0x6368696c645f636f6e74726163745f76657273696f6e 0x7265766f636174696f6e5f6170705f6964

// This TEAL was generated by TEALScript v0.106.1
// https://github.com/algorandfoundation/TEALScript

// This contract is compliant with and/or implements the following ARCs: [ ARC4 ]

// The following ten lines of TEAL handle initial program flow
// This pattern is used to make it easy for anyone to parse the start of the program and determine if a specific action is allowed
// Here, action refers to the OnComplete in combination with whether the app is being created or called
// Every possible action for this contract is represented in the switch statement
// If the action is not implemented in the contract, its respective branch will be "*NOT_IMPLEMENTED" which just contains "err"
txn ApplicationID
!
intc 2 // 6
*
txn OnCompletion
+
switch *call_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *call_UpdateApplication *NOT_IMPLEMENTED *create_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED

*NOT_IMPLEMENTED:
	// The requested action is not implemented in this contract. Are you using the correct OnComplete? Did you set your app ID?
	err

// createApplication(string,uint64)void
*abi_route_createApplication:
	// revocationAppID: uint64
	txna ApplicationArgs 2
	btoi

	// version: string
	txna ApplicationArgs 1
	extract 2 0

	// execute createApplication(string,uint64)void
	callsub createApplication
	intc 0 // 1
	return

// createApplication(version: string, revocationAppID: AppID): void
createApplication:
	proto 2 0

	// contracts/arc58/abstracted_account_factory.algo.ts:12
	// this.childContractVersion.value = version
	bytec 0 //  "child_contract_version"
	frame_dig -1 // version: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	app_global_put

	// contracts/arc58/abstracted_account_factory.algo.ts:13
	// this.revocationAppID.value = revocationAppID
	bytec 1 //  "revocation_app_id"
	frame_dig -2 // revocationAppID: AppID
	app_global_put
	retsub

// updateApplication()void
*abi_route_updateApplication:
	// execute updateApplication()void
	callsub updateApplication
	intc 0 // 1
	return

// updateApplication(): void
updateApplication:
	proto 0 0

	// contracts/arc58/abstracted_account_factory.algo.ts:17
	// assert(this.txn.sender === this.app.creator)
	txn Sender
	txna Applications 0
	app_params_get AppCreator
	pop
	==
	assert
	retsub

// mint(pay,address,string)uint64
*abi_route_mint:
	// The ABI return prefix
	pushbytes 0x151f7c75

	// nickname: string
	txna ApplicationArgs 2
	extract 2 0

	// admin: address
	txna ApplicationArgs 1
	dup
	len
	pushint 32
	==

	// argument 1 (admin) for mint must be a address
	assert

	// pmt: pay
	txn GroupIndex
	intc 0 // 1
	-
	dup
	gtxns TypeEnum
	intc 0 //  pay
	==

	// argument 2 (pmt) for mint must be a pay transaction
	assert

	// execute mint(pay,address,string)uint64
	callsub mint
	itob
	concat
	log
	intc 0 // 1
	return

// mint(pmt: PayTxn, admin: Address, nickname: string): AppID
mint:
	proto 3 1

	// contracts/arc58/abstracted_account_factory.algo.ts:21
	// assert(pmt.amount === (
	//                 300_000 // requires 3 extra pages
	//                 + (28_500 * AbstractedAccount.schema.global.numUint)
	//                 + (50_000 * AbstractedAccount.schema.global.numByteSlice)
	//             )
	//         )
	frame_dig -1 // pmt: PayTxn
	gtxns Amount
	pushint 614000
	==
	assert

	// contracts/arc58/abstracted_account_factory.algo.ts:27
	// assert(pmt.receiver === this.app.address)
	frame_dig -1 // pmt: PayTxn
	gtxns Receiver
	global CurrentApplicationAddress
	==
	assert

	// contracts/arc58/abstracted_account_factory.algo.ts:29
	// sendMethodCall<typeof AbstractedAccount.prototype.createApplication>({
	//             methodArgs: [
	//                 this.childContractVersion.value,
	//                 admin,
	//                 this.revocationAppID.value,
	//                 nickname,
	//             ],
	//             approvalProgram: AbstractedAccount.approvalProgram(),
	//             clearStateProgram: AbstractedAccount.clearProgram(),
	//             globalNumUint: AbstractedAccount.schema.global.numUint,
	//             globalNumByteSlice: AbstractedAccount.schema.global.numByteSlice,
	//             extraProgramPages: 1,
	//             fee: 0,
	//         })
	itxn_begin
	intc 2 //  appl
	itxn_field TypeEnum
	pushbytes 0x69a7853d // method "createApplication(string,address,uint64,string)void"
	itxn_field ApplicationArgs

	// contracts/arc58/abstracted_account_factory.algo.ts:30
	// methodArgs: [
	//                 this.childContractVersion.value,
	//                 admin,
	//                 this.revocationAppID.value,
	//                 nickname,
	//             ]
	bytec 0 //  "child_contract_version"
	app_global_get
	extract 2 0
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs
	frame_dig -2 // admin: Address
	itxn_field ApplicationArgs
	bytec 1 //  "revocation_app_id"
	app_global_get
	itob
	itxn_field ApplicationArgs
	frame_dig -3 // nickname: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs

	// contracts/arc58/abstracted_account_factory.algo.ts:36
	// approvalProgram: AbstractedAccount.approvalProgram()
	pushbytes 0x0a2008010020080406101d260c000170016e0561646d696e0100117265766f636174696f6e5f6170705f6964086e69636b6e616d650800000000000000000776657273696f6e040f88549304151f7c7502001b31181421050b3119088d0c086900000000000008fb0000085b00000000000000000000008a000131002b6412494000243100bd4c484941001a3100be44570200800f616b6974612e636f6d6d756e697479121011898a0001310027056472084812898a0200288bff168bfe508c00298b0050bd4c4844298b0050be4435ff34ff5700081732060f443206298b0050be4435ff34ff5710081709298b0050be4435ff34ff570808170f44898a0201288bff168bfe508c00298b0050bd4c4849410012298b0050be4435ff34ff5700081732060f10494100213206298b0050be4435ff34ff5710081709298b0050be4435ff34ff570808170f108c00898a01018bff3800320a12494100088bff3820320a121041000222898bff3810210512494100098bff38183632001210494100078bff381b221210494100078bff3819231210494100098bff391a0027091210898a0000284702238c00311622088c018b0132040c4100188b018c028b0288ff8d410003228c008b0122088c0142ffe08b0044898a040128470a8bff163203508c008bff163100508c01238c028bfd4941000a298b0050bd4421070d108c038bfc4941000a298b0150bd4421070d108c04238c052704238bfd494100048b03141054228bfc494100048b041410548c06311622088c078b0732040c4100d68b078c088b0888ff07410003228c028b0314494100048b041410494000088bff8b088800bb114100034200a18bfd4941002f8b0314494000278b058bfe15250a0c4941001a8bfe35ff238b05250b0834ff4c25581732038bff8b088800b61011108c098bfc4941002f8b0414494000278b058bfe15250a0c4941001a8bfe35ff238b05250b0834ff4c25581731008bff8b0888007f1011108c0a8b09494000038b0a11448b0941000e8b0635ff34ff2322548c064200108b0a41000b8b0635ff34ff2249548c068b0522088c058b0722088c0742ff228b02448b068c00460a898a02018bff3810210513494000158bff38188bfe13494100098bff3818363200131011494000068bff88fe0411410002228923898a04012847028bff381b230d448bff391a0015210412448bfe168bfd508c00298b00508c018bfc8c028b01be4435ff34ff8119598b0221040b0834ff4c2104588bff391a00800400000000504957040028a8445700041241000423420001228c00460289361a04570200361a0317361a024915241244361a0157020088000222438a0400320d23134427088bff4915165706024c50672b8bfe6727058bfd6727068bfc4915165706024c5067800e666163746f72795f6170705f6964320d6789361a0157020088000222438a010088fc544427088bff4915165706024c506789361a011788000222438a010088fc364427058bff6789361a0157020088000222438a010088fc1e4427068bff4915165706024c506789361a011788000222438a010088fc0044320a8bff700048230d4480066176617461728bff6789361a011788000222438a010088fbda44320a8bff700048230d44800662616e6e65728bff6789361a0157020088000222438a010088fbb244800362696f8bff4915165706024c506789361a01491524124488000222438a010088fb8d442b8bff6789361a034915241244361a024915241244361a011788000222438a03002831008bff7208481244320a7302488bff72084812448bff168bfe508c00298b0050bd4c484941000f298b0050be4435ff34ff81c0015310442b8bfd6789270a88000450b022438a00012b648988000222438a0000320a7302483203124489361a0249152212442353361a01491524124488000222438a020088faef44b122b2108bffb2078bffb22023b201b38bfe41000388fc0089270a361a024915241244361a011788000a2704234f025450b022438a02012832038bff88fb358c008b00410004224200078bfe8bff88fb238c0089361a02570200361a011788000222438a0200284704298bff1632035050bd4c488c00298bff1631005050bd4c488c01238c02238c038b0041000932038bff88fadf8c028b0141000931008bff88fad18c038b0014494100048b011410494000138b00494100048b021410494100048b0314101141000a32038bff88fa5b42001c8b01494100048b031410494100048b02141041000731008bff88fa3c8b038b028bfe8bff88fb508c04b122b210320ab2078bff720848b220801672656b6579696e6720746f20706c7567696e20617070b20523b201b38b0435ff34ff2353410021298bff1632035050be4435ff34ff21063206165d298bff163203505049bc484cbf8b0435ff34ff2253410021298bff1631005050be4435ff34ff21063206165d298bff163100505049bc484cbf89361a02570200361a0157020088000222438a02008bfe23252a8bff504e02ba1788febd89361a06570200361a0549152212442353361a0417361a0317361a024915241244361a011788000222438a06002888f917448bff168bfe508c00298b005049bc482828270b8bfd168802058bfc168801ff27078801fa2704238bfb548801f18bfa491521040a165706024c508801ee4850bf89361a02570200361a01491524124488000222438a020088f8bc448bff49bc488bfe4915165706024c50bf89361a024915241244361a011788000222438a02002888f8924940000488f8bc11448bff168bfe508c00298b0050bd4c4844298b0050bc89361a07570200361a0649152212442353361a0517361a0417361a034915241244361a0217361a0157020088000222438a0700284988f83c442a8bff50bd4c4814448bfe168bfd508c002a8bff508b00bf2828270b8bfc168801218bfb1688011b27078801162704238bfa5488010d8bf9491521040a165706024c5088010a48508c01298b005049bc488b01bf89361a0157020088000222438a01002888f7d44940000488f7fe11442a8bff50bd4c48442a8bff508c00298b00be4450bd4c48442a8bff50bc298b00be4450bc89800469a7853d361a008e01fad8008004e500dfb680049f91cccd800417d8bcb48004385658ab80045ef0b4158004d24b755680045fa449c6800413bc44e427098004c95a5d3d8004e9026da880043f8615d780045c34f3d680044e23cbd1800457a51d8880044d3723558004b9ccb4648004e350b9d4361a008e12fac2fad8faf8fb1efb44fb67fb80fbdafbe9fbfbfc32fc6dfd9cfdc0fe32fe5dfe94ff210080041747405b361a008e01fa94008a04038bfc8bff508bfd8bfe898a04038bfc8bfe508cfc8bff49158bfe1708165706028cfe8bfd4c508cfd8bfc8bfd8bfe89
	itxn_field ApprovalProgram

	// contracts/arc58/abstracted_account_factory.algo.ts:37
	// clearStateProgram: AbstractedAccount.clearProgram()
	pushbytes 0x0a
	itxn_field ClearStateProgram

	// contracts/arc58/abstracted_account_factory.algo.ts:38
	// globalNumUint: AbstractedAccount.schema.global.numUint
	intc 1 // 4
	itxn_field GlobalNumUint

	// contracts/arc58/abstracted_account_factory.algo.ts:39
	// globalNumByteSlice: AbstractedAccount.schema.global.numByteSlice
	intc 1 // 4
	itxn_field GlobalNumByteSlice

	// contracts/arc58/abstracted_account_factory.algo.ts:40
	// extraProgramPages: 1
	intc 0 // 1
	itxn_field ExtraProgramPages

	// contracts/arc58/abstracted_account_factory.algo.ts:41
	// fee: 0
	pushint 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/arc58/abstracted_account_factory.algo.ts:44
	// return this.itxn.createdApplicationID;
	itxn CreatedApplicationID
	retsub

*create_NoOp:
	pushbytes 0xbf2e1e78 // method "createApplication(string,uint64)void"
	txna ApplicationArgs 0
	match *abi_route_createApplication

	// this contract does not implement the given ABI method for create NoOp
	err

*call_NoOp:
	pushbytes 0x88f292b4 // method "mint(pay,address,string)uint64"
	txna ApplicationArgs 0
	match *abi_route_mint

	// this contract does not implement the given ABI method for call NoOp
	err

*call_UpdateApplication:
	pushbytes 0x46f76533 // method "updateApplication()void"
	txna ApplicationArgs 0
	match *abi_route_updateApplication

	// this contract does not implement the given ABI method for call UpdateApplication
	err