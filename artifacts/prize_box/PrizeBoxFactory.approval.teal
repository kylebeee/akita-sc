#pragma version 10
intcblock 1 0 6

// This TEAL was generated by TEALScript v0.106.1
// https://github.com/algorandfoundation/TEALScript

// This contract is compliant with and/or implements the following ARCs: [ ARC4 ]

// The following ten lines of TEAL handle initial program flow
// This pattern is used to make it easy for anyone to parse the start of the program and determine if a specific action is allowed
// Here, action refers to the OnComplete in combination with whether the app is being created or called
// Every possible action for this contract is represented in the switch statement
// If the action is not implemented in the contract, its respective branch will be "*NOT_IMPLEMENTED" which just contains "err"
txn ApplicationID
!
intc 2 // 6
*
txn OnCompletion
+
switch *call_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *call_UpdateApplication *NOT_IMPLEMENTED *create_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED

*NOT_IMPLEMENTED:
	// The requested action is not implemented in this contract. Are you using the correct OnComplete? Did you set your app ID?
	err

// createApplication(string)void
*abi_route_createApplication:
	// version: string
	txna ApplicationArgs 1
	extract 2 0

	// execute createApplication(string)void
	callsub createApplication
	intc 0 // 1
	return

// createApplication(version: string): void
createApplication:
	proto 1 0

	// contracts/prize_box/prize_box_factory.algo.ts:9
	// this.childContractVersion.value = version
	pushbytes 0x6368696c645f636f6e74726163745f76657273696f6e // "child_contract_version"
	frame_dig -1 // version: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	app_global_put
	retsub

// updateApplication()void
*abi_route_updateApplication:
	// execute updateApplication()void
	callsub updateApplication
	intc 0 // 1
	return

// updateApplication(): void
updateApplication:
	proto 0 0

	// contracts/prize_box/prize_box_factory.algo.ts:13
	// assert(this.txn.sender === this.app.creator)
	txn Sender
	txna Applications 0
	app_params_get AppCreator
	pop
	==
	assert
	retsub

// mint(pay,address)uint64
*abi_route_mint:
	// The ABI return prefix
	pushbytes 0x151f7c75

	// owner: address
	txna ApplicationArgs 1
	dup
	len
	pushint 32
	==

	// argument 0 (owner) for mint must be a address
	assert

	// payment: pay
	txn GroupIndex
	intc 0 // 1
	-
	dup
	gtxns TypeEnum
	intc 0 //  pay
	==

	// argument 1 (payment) for mint must be a pay transaction
	assert

	// execute mint(pay,address)uint64
	callsub mint
	itob
	concat
	log
	intc 0 // 1
	return

// mint(payment: PayTxn, owner: Address): AppID
mint:
	proto 2 1

	// contracts/prize_box/prize_box_factory.algo.ts:17
	// verifyPayTxn(payment, {
	//             receiver: this.app.address,
	//             amount: (
	//                 100_000
	//                 + (28_500 * PrizeBox.schema.global.numUint)
	//                 + (50_000 * PrizeBox.schema.global.numByteSlice)
	//             ),
	//         })
	// verify receiver
	frame_dig -1 // payment: PayTxn
	gtxns Receiver
	global CurrentApplicationAddress
	==

	// transaction verification failed: {"txn":"payment","field":"receiver","expected":"this.app.address"}
	assert

	// verify amount
	frame_dig -1 // payment: PayTxn
	gtxns Amount
	pushint 178500
	==

	// transaction verification failed: {"txn":"payment","field":"amount","expected":"(\n                100_000\n                + (28_500 * PrizeBox.schema.global.numUint)\n                + (50_000 * PrizeBox.schema.global.numByteSlice)\n            )"}
	assert

	// contracts/prize_box/prize_box_factory.algo.ts:26
	// sendMethodCall<typeof PrizeBox.prototype.createApplication>({
	//             methodArgs: [owner],
	//             approvalProgram: PrizeBox.approvalProgram(),
	//             clearStateProgram: PrizeBox.clearProgram(),
	//             globalNumUint: PrizeBox.schema.global.numUint,
	//             globalNumByteSlice: PrizeBox.schema.global.numByteSlice,
	//             extraProgramPages: 0,
	//             fee: 0,
	//         })
	itxn_begin
	intc 2 //  appl
	itxn_field TypeEnum
	pushbytes 0xd324bea4 // method "createApplication(address)void"
	itxn_field ApplicationArgs

	// contracts/prize_box/prize_box_factory.algo.ts:27
	// methodArgs: [owner]
	frame_dig -2 // owner: Address
	itxn_field ApplicationArgs

	// contracts/prize_box/prize_box_factory.algo.ts:28
	// approvalProgram: PrizeBox.approvalProgram()
	pushbytes 0x0a20060008011004202603056f776e657205636f756e740031181481060b3119088d0c01c8000000000000000001e601ba0000000000000000000000361a0149152105124488000224438a0100288bff6729226789361a0149152105124488000224438a0100310028641244288bff6789361a01173116240949381024124488000224438a0200310028641244320a8bfe70004c4814448bff3807320a12448bff380832101244b12104b210320ab2148bfeb21122b21222b201b389361a0157020088000224438a01002a49310028641244228c008b008bff15250a0c4100f08bff35ff228b00250b08220834ff4c23581722134100b0320a8bff35ff228b00250b08220834ff4c2358177000488bff35ff228b00250b08230834ff4c235817128c018b0141004329642409294c67b12104b2108bff35ff228b00250b08220834ff4c235817b2118bff35ff228b00250b08230834ff4c235817b2122864b2142864b21522b201b3420039b12104b2108bff35ff228b00250b08220834ff4c235817b2118bff35ff228b00250b08230834ff4c235817b2122864b2142864b21522b201b3420020b124b2108bff35ff228b00250b08230834ff4c235817b2082864b20722b201b38b0024088c0042ff058988000224438a00003100286412442964221244b124b2102864b2072864b20922b201b3898004d324bea4361a008e01fe3a008004adf92ae480043ea11832800444200fbd361a008e03fe35fe51fe9c0080042487c32c361a008e01ffa300
	itxn_field ApprovalProgram

	// contracts/prize_box/prize_box_factory.algo.ts:29
	// clearStateProgram: PrizeBox.clearProgram()
	pushbytes 0x0a
	itxn_field ClearStateProgram

	// contracts/prize_box/prize_box_factory.algo.ts:30
	// globalNumUint: PrizeBox.schema.global.numUint
	intc 0 // 1
	itxn_field GlobalNumUint

	// contracts/prize_box/prize_box_factory.algo.ts:31
	// globalNumByteSlice: PrizeBox.schema.global.numByteSlice
	intc 0 // 1
	itxn_field GlobalNumByteSlice

	// contracts/prize_box/prize_box_factory.algo.ts:32
	// extraProgramPages: 0
	intc 1 // 0
	itxn_field ExtraProgramPages

	// contracts/prize_box/prize_box_factory.algo.ts:33
	// fee: 0
	intc 1 // 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/prize_box/prize_box_factory.algo.ts:36
	// return this.itxn.createdApplicationID;
	itxn CreatedApplicationID
	retsub

*create_NoOp:
	pushbytes 0x115756db // method "createApplication(string)void"
	txna ApplicationArgs 0
	match *abi_route_createApplication

	// this contract does not implement the given ABI method for create NoOp
	err

*call_NoOp:
	pushbytes 0x3decb140 // method "mint(pay,address)uint64"
	txna ApplicationArgs 0
	match *abi_route_mint

	// this contract does not implement the given ABI method for call NoOp
	err

*call_UpdateApplication:
	pushbytes 0x46f76533 // method "updateApplication()void"
	txna ApplicationArgs 0
	match *abi_route_updateApplication

	// this contract does not implement the given ABI method for call UpdateApplication
	err